// Generated by CoffeeScript 1.7.1
(function() {
  var editProductCtrl, editProductModule;

  editProductModule = angular.module('wsEditProductModule', []);

  editProductCtrl = function($scope, $http, $window) {
    var company, _i, _len;
    $scope.name = PRODUCT.name;
    $scope.price = PRODUCT.price;
    $scope.description = PRODUCT.description;
    if (PRODUCT.company != null) {
      for (_i = 0, _len = COMPANIES.length; _i < _len; _i++) {
        company = COMPANIES[_i];
        if (company._id === PRODUCT.company._id) {
          $scope.company = company;
        }
      }
    } else {
      $scope.company = COMPANIES[0];
    }
    $scope.companies = COMPANIES;
    return $scope.send = function() {
      var promise;
      promise = $http.post(SEND_ADDRESS, {
        name: $scope.name,
        description: $scope.description,
        company: $scope.company,
        price: $scope.price
      });
      return promise.success(function(data) {
        if (data === 'OK') {
          return $window.location.href = REDIRECT_ADDRESS;
        }
      });
    };
  };

  editProductCtrl.$inject = ['$scope', '$http', '$window'];

  editProductModule.controller('wsEditProductCtrl', editProductCtrl);

}).call(this);
